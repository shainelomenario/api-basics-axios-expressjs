var express = require('express');
var axios = require("axios")
var router = express.Router();
/* GET Jokes page */

router.get('/jokes', async (req, res) => {
    //TODO
    //work with this api: https://humorapi.com/
    //to server jokes to the user.
    
    res.render("index", {
        "title": "Your Joke",
        "data": "Your Joke",
        "icon": `data:image/jpeg;base64,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`
    });
})
/* GET weather page. */
router.get('/weather', async function(req, res) {
    const appid = process.env.apikey;
    const baseURL = "https://api.openweathermap.org/data/2.5/weather";
    const lat = 40.73674;
    const lon = -73.8202;
    const units = "metric";


    const keywords = req.query.keywords;
    const response = await axios.get(
        baseURL,
        {
            params: {
                lat: lat,
                lon: lon,
                units: units,
                appid: appid
            }
        }
    );
    console.log(response.data);
  
    res.render("index", {
        "title": response.data.name,
        "data": response.data.main.temp,
        "icon": `https://openweathermap.org/img/wn/${response.data.weather[0].icon}@2x.png`
    });
});

module.exports = router;
